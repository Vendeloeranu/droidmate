// Copyright (c) 2012-2016 Saarland University
// All rights reserved.
//
// Author: Konrad Jamrozik, jamrozik@st.cs.uni-saarland.de
//
// This file is part of the "DroidMate" project.
//
// www.droidmate.org

apply plugin: 'groovy'

compileJava.sourceCompatibility = JavaVersion.VERSION_1_8
compileJava.targetCompatibility = JavaVersion.VERSION_1_8

// See :projects:command project for explanation of this code
evaluationDependsOn(":projects:core")

// See :projects:command project for explanation of this code
configurations {forceJunitPriority}
sourceSets.test.runtimeClasspath = configurations.forceJunitPriority + sourceSets.test.runtimeClasspath
sourceSets.test.compileClasspath = configurations.forceJunitPriority + sourceSets.test.compileClasspath

// See :projects:command project for explanation of this code
sourceSets.test.runtimeClasspath += project(":projects:core").sourceSets.test.runtimeClasspath

// See :projects:command project for explanation of this code
sourceSets.main.runtimeClasspath += project(":projects:core").sourceSets.main.runtimeClasspath

String libsRobotDirPath = "libs_robot"
def osIsWindows() {
  if (System.properties['os.name'].toLowerCase().contains('windows'))
    1 else 0
}
// Returns the path to directory of OS-dependent library required to interact with a robot through serial port.
def robotLibDir = {
  if (osIsWindows())
  // not sure if the libraries in this dir will work on windows versions different than Windows 7 x64
    return "$projectDir/$libsRobotDirPath/Windows_7"
  else
    return "$projectDir/$libsRobotDirPath/Mac_OS"
}

dependencies {

  forceJunitPriority 'junit:junit:4.12'
  testCompile 'junit:junit:4.12'
  testCompile 'org.hamcrest:hamcrest-core:1.3'
  testCompile project(":projects:core").sourceSets.test.output

  compile project(":projects:core")
  compile fileTree(dir: robotLibDir(), include: '*.jar')
}



test {

  // See :projects:command project for explanation of this code
  workingDir rootDir

  // See :projects:command project for explanation of this code
  includes = ['']

}

